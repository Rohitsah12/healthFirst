module.exports=[7476,a=>{"use strict";a.s(["default",()=>s],7476);var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(81560),f=a.i(24569),g=a.i(46842),h=a.i(17371),i=a.i(81974),j=a.i(76585),k=a.i(23330),l=a.i(93735),m=a.i(33508),n=a.i(14548),o=a.i(96221);let p=({patient:a,onClose:d,onSuccess:e})=>{let f=!!a,[g,h]=(0,c.useState)({name:a?.name??"",phone:a?.phone??"",gender:a?.gender??"MALE",dob:a?.dob?a.dob.split("T")[0]:"",address:a?.address??""}),[j,k]=(0,c.useState)({}),[l,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null);(0,c.useEffect)(()=>{a&&h({name:a.name,phone:a.phone,gender:a.gender,dob:a.dob?a.dob.split("T")[0]:"",address:a.address??""})},[a]);let s=a=>{let{name:b,value:c}=a.target;h(a=>({...a,[b]:c})),r(null),j[b]&&k(a=>{let c={...a};return delete c[b],c})},t=async b=>{if(b.preventDefault(),(()=>{let a={};return g.name.trim()||(a.name="Name is required"),g.phone.trim()||(a.phone="Phone is required"),g.dob.trim()||(a.dob="Date of birth is required"),k(a),0===Object.keys(a).length})()){p(!0),r(null);try{f&&a?await i.patientApi.updatePatient(a.id,{name:g.name,phone:g.phone,gender:g.gender,dob:g.dob,address:g.address}):await i.patientApi.createPatient({name:g.name,phone:g.phone,gender:g.gender,dob:g.dob,address:g.address}),e()}catch(a){a instanceof Error?r(a.message):r(f?"Failed to update patient":"Failed to create patient")}finally{p(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-300 bg-gradient-to-r from-blue-600 to-blue-700 rounded-t-2xl",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white",children:f?"Edit Patient":"Add New Patient"}),(0,b.jsx)("button",{onClick:d,className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-2 transition-all",disabled:l,children:(0,b.jsx)(m.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:t,className:"p-6 space-y-4 overflow-y-auto",children:[q&&(0,b.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",children:(0,b.jsx)("p",{className:"font-medium",children:q})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"name",value:g.name,onChange:s,placeholder:"e.g., Rajesh Kumar",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-700 ${j.name?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.name&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"phone",value:g.phone,onChange:s,placeholder:"xxxxxxxxxx",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-900 placeholder-gray-400 ${j.phone?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.phone&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Date of birth ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"date",name:"dob",value:g.dob,onChange:s,className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-900 placeholder-gray-400 ${j.dob?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.dob&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.dob})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 placeholder-gray-400 mb-2",children:["Gender ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"gender",value:g.gender,onChange:s,className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all text-gray-900 placeholder-gray-400",disabled:l,children:[(0,b.jsx)("option",{value:"MALE",children:"Male"}),(0,b.jsx)("option",{value:"FEMALE",children:"Female"}),(0,b.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 placeholder-gray-400 mb-2",children:["Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{name:"address",value:g.address,onChange:s,className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-200 text-gray-900 placeholder-gray-400 ",rows:3,disabled:l})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-300",children:[(0,b.jsx)("button",{type:"button",onClick:d,disabled:l,className:"px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-semibold flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{size:20,className:"animate-spin"}),f?"Updating...":"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Save,{size:20}),f?"Update Patient":"Create Patient"]})})]})]})]})})};var q=a.i(73570);let r=({patient:a,onClose:d,onSuccess:f})=>{let[g,h]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),l=async()=>{h(!0),k(null);try{await i.patientApi.deletePatient(a.id),f()}catch(a){k(a instanceof Error?a.message:"Failed to delete patient")}finally{h(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-50 flex items-center justify-center",children:(0,b.jsx)(q.AlertTriangle,{className:"text-red-600"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Delete patient"})]}),(0,b.jsx)("button",{onClick:d,disabled:g,className:"text-gray-500 hover:text-gray-700 p-2",children:(0,b.jsx)(m.X,{})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[j&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:j}),(0,b.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to permanently delete this patient?"}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded border",children:[(0,b.jsx)("p",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.phone})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:d,disabled:g,className:"px-4 py-2 rounded border",children:"Cancel"}),(0,b.jsxs)("button",{onClick:l,disabled:g,className:"px-4 py-2 rounded bg-red-600 text-white flex items-center gap-2",children:[g?(0,b.jsx)(o.Loader2,{className:"animate-spin"}):(0,b.jsx)(e.Trash2,{}),"Delete"]})]})]})]})})},s=()=>{let[a,m]=(0,c.useState)([]),[n,o]=(0,c.useState)({currentPage:1,totalPages:1,totalCount:0,limit:9,hasNextPage:!1,hasPrevPage:!1}),[q,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),D=async(a=n.currentPage)=>{u(!0),w(null);try{let b=await i.patientApi.getPatients({page:a,limit:n.limit,search:q||void 0});m(b.patients),o(b.pagination)}catch(a){w(a instanceof Error?a.message:"Failed to fetch patients")}finally{u(!1)}};return(0,c.useEffect)(()=>{D(1)},[q]),(0,c.useEffect)(()=>{D(n.currentPage)},[n.currentPage]),(0,b.jsxs)("div",{className:"min-h-screen p-6 bg-[#f8f9fb]",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Patients"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage patient records and history"})]}),(0,b.jsxs)("button",{onClick:()=>{A(null),y(!0)},className:"inline-flex items-center gap-2 bg-[#2563eb] hover:bg-[#1f4fcf] text-white px-5 py-3 rounded-lg shadow font-semibold",children:[(0,b.jsx)(h.UserPlus,{}),(0,b.jsx)("span",{children:" Add New Patient"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4 gap-4",children:(0,b.jsxs)("div",{className:"flex-1 relative max-w-xl",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-3 text-gray-400",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Search patients by name or phoneâ€¦",value:q,onChange:a=>s(a.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-[#2563eb] focus:outline-none text-gray-900 placeholder-gray-400"})]})}),v&&(0,b.jsx)(l.default,{message:v,onDismiss:()=>w(null)}),t?(0,b.jsx)("div",{className:"py-16",children:(0,b.jsx)(k.default,{})}):(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-100",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[(0,b.jsx)("th",{className:"py-3 px-4",children:"Name"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Phone"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Age"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Gender"}),(0,b.jsx)("th",{className:"py-3 px-4 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100 bg-white",children:(0===a.length?[{id:"ex1",name:"Rajesh Kumar",phone:"+977-9841234567",dob:"1980-01-01",gender:"MALE"},{id:"ex2",name:"Priya Singh",phone:"+977-9841234568",dob:"1993-05-10",gender:"FEMALE"},{id:"ex3",name:"Amit Thapa",phone:"+977-9841234569",dob:"1997-08-22",gender:"MALE"},{id:"ex4",name:"Sunita Khatri",phone:"+977-9841234570",dob:"1987-03-12",gender:"FEMALE"}]:a).map(a=>{let c=function(a){if(!a)return"-";let b=new Date(a);if(isNaN(b.getTime()))return"-";let c=new Date,d=c.getUTCFullYear()-b.getUTCFullYear(),e=c.getUTCMonth()-b.getUTCMonth();return(e<0||0===e&&c.getUTCDate()<b.getUTCDate())&&d--,d}(a.dob);return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"py-4 px-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:(0,b.jsx)(g.User,{})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"font-medium text-gray-800",children:a.name})})]}),(0,b.jsx)("td",{className:"py-4 px-4 text-gray-700",children:a.phone}),(0,b.jsx)("td",{className:"py-4 px-4 text-gray-700",children:c}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsx)("span",{className:"inline-block px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700",children:"MALE"===a.gender?"Male":"FEMALE"===a.gender?"Female":"Other"})}),(0,b.jsx)("td",{className:"py-4 px-4 text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>{A(a),y(!0)},title:"Edit",className:"p-2 rounded hover:bg-blue-50",children:(0,b.jsx)(f.Edit,{className:"text-[#2563eb]"})}),(0,b.jsx)("button",{onClick:()=>C(a),title:"Delete",className:"p-2 rounded hover:bg-red-50",children:(0,b.jsx)(e.Trash2,{className:"text-red-600"})})]})})]},a.id)})})]}),n.totalPages>1&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(j.default,{currentPage:n.currentPage,totalPages:n.totalPages,totalCount:n.totalCount,onPageChange:a=>{o(b=>({...b,currentPage:a}))},hasNextPage:n.hasNextPage,hasPrevPage:n.hasPrevPage})})]})]}),x&&(0,b.jsx)(p,{patient:z,onClose:()=>{y(!1),A(null)},onSuccess:()=>{y(!1),A(null),D(1)}}),B&&(0,b.jsx)(r,{patient:B,onClose:()=>C(null),onSuccess:()=>{C(null),D(1)}})]})}}];

//# sourceMappingURL=src_app_%28protected%29_patients_page_tsx_15911c2b._.js.map