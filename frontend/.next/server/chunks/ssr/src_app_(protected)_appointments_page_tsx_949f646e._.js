module.exports=[30407,a=>{"use strict";a.s(["default",()=>x],30407);var b=a.i(87924),c=a.i(72131),d=a.i(41675),e=a.i(15618),f=a.i(69520),g=a.i(26510);let h={getAppointmentsByDate:async a=>{let{data:b}=await g.default.get(`/visits/appointments?date=${a}`);return b.data.appointments},bookAppointment:async a=>{let{data:b}=await g.default.post("/visits/appointments",a);return b.data.appointment},rescheduleAppointment:async(a,b)=>{let{data:c}=await g.default.patch(`/visits/appointments/${a}/reschedule`,b);return c.data.appointment},cancelAppointment:async(a,b)=>{let{data:c}=await g.default.patch(`/visits/appointments/${a}/cancel`,{reason:b});return c.data.appointment},checkInAppointment:async a=>{let{data:b}=await g.default.post(`/visits/appointments/${a}/checkin`);return b.data.appointment},getDoctorAvailability:async(a,b)=>{let{data:c}=await g.default.get(`/doctor/${a}/availability?date=${b}`);return c.data},getDoctorsAvailableOnDate:async a=>{let{data:b}=await g.default.get(`/doctor/available-on-date?date=${a}`);return b.data.doctors}};var i=a.i(23330),j=a.i(93735),k=a.i(41710),l=a.i(46842),m=a.i(35126),n=a.i(92e3),o=a.i(24569);let p=(0,a.i(70106).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var q=a.i(16201);let r=({appointment:a,onCheckIn:c,onReschedule:d,onCancel:e})=>{let f=!!a.scheduledTime&&new Date(a.scheduledTime)<new Date,g="SCHEDULED"===a.currentStatus&&!f;return(0,b.jsx)("div",{className:`border-l-4 rounded-lg p-4 transition-all ${{SCHEDULED:"border-blue-500 bg-blue-50",CHECKED_IN:"border-green-500 bg-green-50",WITH_DOCTOR:"border-yellow-500 bg-yellow-50",CANCELLED:"border-red-500 bg-red-50",COMPLETED:"border-gray-500 bg-gray-50"}[a.currentStatus]} ${f&&"SCHEDULED"===a.currentStatus?"opacity-60":""}`,children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-sm",children:(0,b.jsx)(l.User,{size:24,className:"text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:a.patient.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.patient.phone})]}),"URGENT"===a.priority&&(0,b.jsxs)("span",{className:"bg-red-500 text-white text-xs px-3 py-1 rounded-full font-bold flex items-center gap-1",children:[(0,b.jsx)(n.AlertCircle,{size:12}),"URGENT"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,b.jsx)(m.Stethoscope,{size:16,className:"text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.doctor.user.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.doctor.specialisation})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,b.jsx)(k.Clock,{size:16,className:"text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.scheduledTime?new Date(a.scheduledTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:{SCHEDULED:"Scheduled",CHECKED_IN:"Checked In",WITH_DOCTOR:"With Doctor",CANCELLED:"Cancelled",COMPLETED:"Completed"}[a.currentStatus]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>c(a.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[(0,b.jsx)(q.CheckCircle,{size:16}),"Check-in"]}),(0,b.jsxs)("button",{onClick:()=>d(a),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[(0,b.jsx)(o.Edit,{size:16}),"Reschedule"]}),(0,b.jsxs)("button",{onClick:()=>e(a),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[(0,b.jsx)(p,{size:16}),"Cancel"]})]}),"SCHEDULED"===a.currentStatus&&f&&(0,b.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"Past Appointment"}),"CANCELLED"===a.currentStatus&&(0,b.jsx)("span",{className:"text-xs text-red-600 font-bold",children:"CANCELLED"})]})]})})};var s=a.i(33508),t=a.i(81974);let u=({onClose:a,onSuccess:e,preSelectedDate:f})=>{let[g,j]=(0,c.useState)(1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[u,v]=(0,c.useState)(f||new Date().toISOString().split("T")[0]),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("NORMAL"),[M,N]=(0,c.useState)("");(0,c.useEffect)(()=>{let a=setTimeout(async()=>{if(w.length<2)return void z([]);try{let a=await t.patientApi.getPatients({search:w,limit:1e3,page:1});z(a.patients)}catch(a){console.error("Failed to search patients:",a)}},300);return()=>clearTimeout(a)},[w]),(0,c.useEffect)(()=>{(async()=>{if(u){p(!0);try{let a=await h.getDoctorsAvailableOnDate(u);D(a)}catch(a){r(a.message||"Failed to load available doctors")}finally{p(!1)}}})()},[u]),(0,c.useEffect)(()=>{(async()=>{if(E&&u){p(!0);try{let a=await h.getDoctorAvailability(E.id,u);H(a.availableSlots)}catch(a){r(a.message||"Failed to load available slots")}finally{p(!1)}}})()},[E,u]);let O=async()=>{if(!A||!E||!I)return void r("Please complete all required fields");p(!0),r(null);try{await h.bookAppointment({patientId:A.id,doctorId:E.id,scheduledTime:I,priority:K,notes:M||void 0}),e()}catch(a){r(a.message||"Failed to book appointment")}finally{p(!1)}},P=A&&u,Q=P&&E,R=Q&&I;return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Book Appointment"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",g," of 3"]})]}),(0,b.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 ${g>=1?"text-blue-600":"text-gray-400"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${g>=1?"bg-blue-600 text-white":"bg-gray-200"}`,children:"1"}),(0,b.jsx)("span",{className:"font-medium",children:"Patient & Date"})]}),(0,b.jsx)("div",{className:"flex-1 h-0.5 bg-gray-200 mx-4"}),(0,b.jsxs)("div",{className:`flex items-center gap-2 ${g>=2?"text-blue-600":"text-gray-400"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${g>=2?"bg-blue-600 text-white":"bg-gray-200"}`,children:"2"}),(0,b.jsx)("span",{className:"font-medium",children:"Select Doctor"})]}),(0,b.jsx)("div",{className:"flex-1 h-0.5 bg-gray-200 mx-4"}),(0,b.jsxs)("div",{className:`flex items-center gap-2 ${g>=3?"text-blue-600":"text-gray-400"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${g>=3?"bg-blue-600 text-white":"bg-gray-200"}`,children:"3"}),(0,b.jsx)("span",{className:"font-medium",children:"Time & Details"})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[q&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(n.AlertCircle,{size:20}),(0,b.jsx)("span",{children:q})]}),1===g&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(d.Calendar,{className:"inline mr-2",size:16}),"Appointment Date"]}),(0,b.jsx)("input",{type:"date",value:u,onChange:a=>v(a.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(l.User,{className:"inline mr-2",size:16}),"Search Patient"]}),(0,b.jsx)("input",{type:"text",placeholder:"Type patient name or phone...",value:w,onChange:a=>x(a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400"}),y.length>0&&(0,b.jsx)("div",{className:"mt-2 border-2 border-gray-200 rounded-lg max-h-60 overflow-y-auto",children:y.map(a=>(0,b.jsxs)("button",{onClick:()=>{B(a),x(a.name),z([])},className:"w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a.phone," â€¢ ",a.gender," â€¢"," ",new Date().getFullYear()-new Date(a.dob).getFullYear()," ","years"]})]},a.id))}),A&&(0,b.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,b.jsxs)("p",{className:"font-medium text-gray-800",children:["Selected: ",A.name]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:A.phone})]})]})]}),2===g&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["Available Doctors on"," ",new Date(u).toLocaleDateString()]}),o?(0,b.jsx)(i.default,{}):0===C.length?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("p",{className:"text-gray-600",children:"No doctors available on this date"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3",children:C.map(a=>(0,b.jsx)("button",{onClick:()=>F(a),className:`p-4 border-2 rounded-lg text-left transition-all ${E?.id===a.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(m.Stethoscope,{className:"text-blue-600",size:24})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-bold text-gray-800",children:a.user.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.specialisation}),a.workingHours[0]&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(a.workingHours[0].startTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"})," - ",new Date(a.workingHours[0].endTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"})]})]}),E?.id===a.id&&(0,b.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},a.id))})]}),3===g&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,b.jsx)(k.Clock,{className:"inline mr-2",size:16}),"Available Time Slots"]}),o?(0,b.jsx)(i.default,{}):0===G.length?(0,b.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,b.jsx)("p",{className:"text-gray-600",children:"No available slots for this doctor on selected date"})}):(0,b.jsx)("div",{className:"grid grid-cols-4 gap-3",children:G.map(a=>(0,b.jsx)("button",{onClick:()=>J(a),className:`px-4 py-3 border-2 rounded-lg font-medium transition-all ${I===a?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:border-blue-400 hover:bg-blue-50"}`,children:new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>L("NORMAL"),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-all ${"NORMAL"===K?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Normal"}),(0,b.jsx)("button",{onClick:()=>L("URGENT"),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-all ${"URGENT"===K?"border-red-600 bg-red-50 text-red-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"ðŸš¨ Urgent"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,b.jsx)("textarea",{rows:3,placeholder:"Add any special notes or instructions...",value:M,onChange:a=>N(a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50",children:[(0,b.jsx)("button",{onClick:()=>{1===g?a():j(g-1)},className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:1===g?"Cancel":"Back"}),(0,b.jsx)("button",{onClick:()=>{3===g?O():j(g+1)},disabled:o||1===g&&!P||2===g&&!Q||3===g&&!R,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Processing..."})]}):3===g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Calendar,{size:20}),(0,b.jsx)("span",{children:"Confirm Booking"})]}):(0,b.jsx)("span",{children:"Next"})})]})]})})},v=({appointment:a,onClose:e,onSuccess:f})=>{let[g,j]=(0,c.useState)(new Date().toISOString().split("T")[0]),[l,m]=(0,c.useState)([]),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{r(!0),u(null);try{let b=await h.getDoctorAvailability(a.doctorId,g);m(b.availableSlots)}catch(a){u(a.message||"Failed to load available slots")}finally{r(!1)}})()},[g,a.doctorId]);let v=async()=>{if(!o)return void u("Please select a time slot");r(!0),u(null);try{await h.rescheduleAppointment(a.id,{newScheduledTime:o}),f()}catch(a){u(a.message||"Failed to reschedule appointment")}finally{r(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Reschedule Appointment"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Patient: ",a.patient.name]})]}),(0,b.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[(0,b.jsx)(n.AlertCircle,{size:20}),(0,b.jsx)("span",{children:t})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Appointment:"}),(0,b.jsx)("p",{className:"text-blue-900 font-bold",children:a.scheduledTime?new Date(a.scheduledTime).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,b.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Doctor: ",a.doctor.user.name," (",a.doctor.specialisation,")"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(d.Calendar,{className:"inline mr-2",size:16}),"Select New Date"]}),(0,b.jsx)("input",{type:"date",value:g,onChange:a=>j(a.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,b.jsx)(k.Clock,{className:"inline mr-2",size:16}),"Available Time Slots"]}),q?(0,b.jsx)("div",{className:"py-8",children:(0,b.jsx)(i.default,{})}):0===l.length?(0,b.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,b.jsx)("p",{className:"text-gray-600",children:"No available slots for this doctor on selected date"})}):(0,b.jsx)("div",{className:"grid grid-cols-4 gap-3",children:l.map(a=>(0,b.jsx)("button",{onClick:()=>p(a),className:`px-4 py-3 border-2 rounded-lg font-medium transition-all ${o===a?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:border-blue-400 hover:bg-blue-50"}`,children:new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},a))})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,b.jsx)("button",{onClick:e,className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:v,disabled:q||!o,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Rescheduling..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Calendar,{size:20}),(0,b.jsx)("span",{children:"Confirm Reschedule"})]})})]})]})})},w=({appointment:a,onClose:d,onSuccess:e})=>{let[f,g]=(0,c.useState)(""),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=async()=>{j(!0),l(null);try{await h.cancelAppointment(a.id,f||void 0),e()}catch(a){l(a.message||"Failed to cancel appointment")}finally{j(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(p,{className:"text-red-600",size:24})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Cancel Appointment"})]}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[k&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[(0,b.jsx)(n.AlertCircle,{size:20}),(0,b.jsx)("span",{children:k})]}),(0,b.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,b.jsx)(n.AlertCircle,{className:"inline mr-2",size:16}),(0,b.jsx)("strong",{children:"Warning:"})," This action cannot be undone. The appointment will be permanently cancelled."]})}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Appointment Details:"}),(0,b.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Patient:"})," ",a.patient.name]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Doctor:"})," ",a.doctor.user.name]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Date & Time:"})," ",a.scheduledTime?new Date(a.scheduledTime).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,b.jsx)("button",{onClick:d,disabled:i,className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50",children:"Keep Appointment"}),(0,b.jsx)("button",{onClick:m,disabled:i,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Cancelling..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{size:20}),(0,b.jsx)("span",{children:"Yes, Cancel Appointment"})]})})]})]})})},x=()=>{let[a,g]=(0,c.useState)([]),[k,l]=(0,c.useState)(new Date().toISOString().split("T")[0]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,s]=(0,c.useState)(!1),[t,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null);(0,c.useEffect)(()=>{C()},[k]);let C=async()=>{n(!0),p(null);try{let a=await h.getAppointmentsByDate(k);g(a)}catch(a){p(a instanceof Error?a.message:"Failed to fetch appointments")}finally{n(!1)}},D=async a=>{try{await h.checkInAppointment(a),C()}catch(a){p(a instanceof Error?a.message:"Failed to check in patient")}},E=a=>{B(a),x(!0)},F=a=>{B(a),z(!0)};return(0,b.jsxs)("div",{className:"min-h-screen p-6 bg-[#f8f9fb]",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Appointments"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Schedule and manage patient appointments"})]}),(0,b.jsxs)("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 shadow-lg transition-colors font-medium",children:[(0,b.jsx)(e.Plus,{size:20}),"Book Appointment"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 max-w-md",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(d.Calendar,{className:"inline mr-2",size:16}),"Select Date"]}),(0,b.jsx)("input",{type:"date",value:k,onChange:a=>l(a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-gray-900 placeholder-gray-400"})]}),(0,b.jsxs)("button",{onClick:C,disabled:m,className:"mt-7 px-4 py-3 border-2 border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2 font-medium disabled:opacity-50",children:[(0,b.jsx)(f.RefreshCw,{size:18,className:m?"animate-spin":""}),"Refresh"]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Appointments for"," ",new Date(k).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:[a.length," appointment(s)"]})]}),o&&(0,b.jsx)(j.default,{message:o,onDismiss:()=>p(null)}),m?(0,b.jsx)("div",{className:"py-16",children:(0,b.jsx)(i.default,{})}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(d.Calendar,{size:40,className:"text-gray-400"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No appointments scheduled"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Book a new appointment to get started"}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Book Appointment"})]}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsx)(r,{appointment:a,onCheckIn:D,onReschedule:E,onCancel:F},a.id))})]}),q&&(0,b.jsx)(u,{onClose:()=>s(!1),onSuccess:()=>{s(!1),C()},preSelectedDate:k}),t&&A&&(0,b.jsx)(v,{appointment:A,onClose:()=>{x(!1),B(null)},onSuccess:()=>{x(!1),B(null),C()}}),y&&A&&(0,b.jsx)(w,{appointment:A,onClose:()=>{z(!1),B(null)},onSuccess:()=>{z(!1),B(null),C()}})]})}}];

//# sourceMappingURL=src_app_%28protected%29_appointments_page_tsx_949f646e._.js.map