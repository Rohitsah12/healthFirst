module.exports=[71663,a=>{"use strict";a.s(["default",()=>J],71663);var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(87532),f=a.i(35126),g=a.i(5974),h=a.i(41675),i=a.i(50522),j=a.i(70106);let k=(0,j.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),l=(0,j.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var m=a.i(24569),n=a.i(81560);let o=({doctor:a,onViewSchedule:c,onEdit:d,onDelete:e})=>(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(f.Stethoscope,{className:"text-blue-600",size:32})}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:`text-xs px-3 py-1 rounded-full font-bold ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.isActive?"Active":"Inactive"})})]}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:a.user.name}),(0,b.jsx)("p",{className:"text-gray-600 mb-1",children:a.specialisation}),(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${{MALE:"bg-blue-100 text-blue-700",FEMALE:"bg-pink-100 text-pink-700",OTHER:"bg-purple-100 text-purple-700"}[a.gender]||"bg-gray-100 text-gray-700"}`,children:a.gender})}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l,{size:14}),(0,b.jsx)("span",{className:"truncate",children:a.user.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k,{size:14}),(0,b.jsx)("span",{children:a.user.phone})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 pt-4 border-t border-gray-200",children:[(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),d(a)},className:"flex-1 bg-blue-100 text-blue-700 px-3 py-2 rounded-lg hover:bg-blue-200 transition-colors flex items-center justify-center gap-1 font-medium text-sm",children:[(0,b.jsx)(m.Edit,{size:14}),"Edit"]}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),e(a)},className:"flex-1 bg-red-100 text-red-700 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors flex items-center justify-center gap-1 font-medium text-sm",children:[(0,b.jsx)(n.Trash2,{size:14}),"Delete"]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(h.Calendar,{size:16}),(0,b.jsxs)("span",{children:[a?.workingHours?.length||0," days/week"]})]}),(0,b.jsxs)("button",{onClick:()=>c(a.id),className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1 transition-colors",children:["Schedule ",(0,b.jsx)(i.ChevronRight,{size:16})]})]})]}),p=(0,j.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var q=a.i(41710),r=a.i(23330),s=a.i(33508),t=a.i(14548),u=a.i(96221),v=a.i(26510);let w={getDoctorSchedule:async(a,b)=>{let c=b?`?dayOfWeek=${b}`:"";return(await v.default.get(`/doctor-schedule/${a}${c}`)).data.data},upsertDoctorSchedule:async(a,b)=>(await v.default.put(`/doctor-schedule/${a}`,b)).data.data,deleteDoctorSchedule:async(a,b)=>{let c=b?`?dayOfWeek=${b}`:"";return(await v.default.delete(`/doctor-schedule/${a}${c}`)).data.data}},x=a=>String(a).padStart(2,"0"),y="Asia/Kolkata",z=(a,b=y)=>{if(!a)return"-";try{return new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:b})}catch{return"-"}},A=(a,b=y)=>{if(!a)return"00:00";if(a.includes("T")||a.endsWith("Z"))try{return new Date(a).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:b})}catch{return"00:00"}let[c,d]=a.split(":");return void 0===c||void 0===d?"00:00":`${x(Number(c))}:${x(Number(d))}`},B=({doctor:a,onClose:e,onSuccess:f})=>{let g=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],h=(a.workingHours||[]).map((a,b)=>({id:`${a.id??`${a.dayOfWeek}-${b}`}`,dayOfWeek:a.dayOfWeek,startTime:A(a.startTime??a.start??"00:00",y),endTime:A(a.endTime??a.end??"00:00",y)})),[i,j]=(0,c.useState)(h.length>0?h:[]),[k,l]=(0,c.useState)(!1),[m,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({}),r=(a,b,c)=>{j(d=>d.map(d=>d.id===a?{...d,[b]:c}:d)),o(null),p[a]&&q(b=>{let c={...b};return delete c[a],c})},v=async b=>{if(b.preventDefault(),(()=>{let a={};return 0===i.length?(o("Please add at least one schedule"),!1):(i.forEach(b=>{if(!b.startTime||!b.endTime){a[b.id]="Both start and end times are required";return}let[c,d]=b.startTime.split(":").map(Number),[e,f]=b.endTime.split(":").map(Number);60*e+f<=60*c+d&&(a[b.id]="End time must be after start time")}),q(a),0===Object.keys(a).length)})()){l(!0),o(null);try{let b=a=>{let[b="00",c="00"]=a.split(":");return`${String(b).padStart(2,"0")}:${String(c).padStart(2,"0")}`},c=i.map(({dayOfWeek:a,startTime:c,endTime:d})=>({dayOfWeek:a,startTime:b(c),endTime:b(d)}));await w.upsertDoctorSchedule(a.id,{schedules:c}),f()}catch(a){o(a instanceof Error?a.message:"Failed to update schedule")}finally{l(!1)}}},x=g.reduce((a,b)=>(a[b]=i.filter(a=>a.dayOfWeek===b),a),{});return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Edit Schedule"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.user.name})]}),(0,b.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:k,children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:v,className:"flex-1 overflow-y-auto p-6",children:[m&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:m}),(0,b.jsx)("div",{className:"space-y-6",children:g.map(a=>{let c=x[a],e=a.charAt(0)+a.slice(1).toLowerCase();return(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsx)("h4",{className:"font-bold text-gray-800 text-lg",children:e}),(0,b.jsxs)("button",{type:"button",onClick:()=>{let b={id:`${a}-${Date.now()}`,dayOfWeek:a,startTime:"09:00",endTime:"17:00"};j(a=>[...a,b])},className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[(0,b.jsx)(d.Plus,{size:16})," Add Shift"]})]}),0===c.length?(0,b.jsx)("p",{className:"text-gray-500 italic text-sm",children:"No shifts scheduled"}):(0,b.jsxs)("div",{className:"space-y-3",children:[c.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Start Time (",y,")"]}),(0,b.jsx)("input",{type:"time",value:a.startTime,onChange:b=>r(a.id,"startTime",b.target.value),className:`w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-gray-700 ${p[a.id]?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,disabled:k})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["End Time (",y,")"]}),(0,b.jsx)("input",{type:"time",value:a.endTime,onChange:b=>r(a.id,"endTime",b.target.value),className:`w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-gray-700 ${p[a.id]?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,disabled:k})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>(a=>{j(b=>b.filter(b=>b.id!==a)),q(b=>{let c={...b};return delete c[a],c})})(a.id),disabled:k,className:"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors mt-5",title:"Remove shift",children:(0,b.jsx)(n.Trash2,{size:18})})]},a.id)),p[c[0]?.id]&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:p[c[0].id]})]})]},a)})}),0===i.length&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"No schedules added yet"}),(0,b.jsxs)("button",{type:"button",onClick:()=>{let a={id:`new-${Date.now()}`,dayOfWeek:"MONDAY",startTime:"09:00",endTime:"17:00"};j(b=>[...b,a])},className:"bg-blue-100 text-blue-700 px-6 py-3 rounded-lg flex items-center gap-2 font-medium hover:bg-blue-200 transition-colors mx-auto",children:[(0,b.jsx)(d.Plus,{size:20}),"Add First Schedule"]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:e,disabled:k,className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:k||0===i.length,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{size:20,className:"animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Save,{size:20}),"Save Schedule"]})})]})]})]})})},C=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],D=({doctor:a,onBack:e,isLoading:g,onScheduleUpdate:i})=>{let[j,o]=(0,c.useState)(a.workingHours??[]),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[x,D]=(0,c.useState)(null),[E,F]=(0,c.useState)({});(0,c.useEffect)(()=>{o(a.workingHours??[]),G()},[a.id]);let G=async()=>{try{t(!0);let b=await w.getDoctorSchedule(a.id);b&&b.schedules&&o(b.schedules)}catch(a){console.error("Failed to fetch schedules",a)}finally{t(!1)}},H=()=>{D({...a,workingHours:j}),v(!0)},I=async b=>{if(window.confirm(`Delete all schedules for ${b}? This cannot be undone.`))try{F(a=>({...a,[b]:!0})),await w.deleteDoctorSchedule(a.id,b),await G(),i&&i()}catch(a){console.error("Failed to delete schedules for",b,a),alert(a instanceof Error?a.message:"Failed to delete schedule")}finally{F(a=>({...a,[b]:!1}))}},J=async()=>{v(!1),D(null),await G(),i&&i()};return g||s?(0,b.jsx)(r.default,{}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 font-medium transition-colors",children:[(0,b.jsx)(p,{size:20})," Back to Doctors"]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(f.Stethoscope,{className:"text-blue-600",size:40})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:a.user.name}),(0,b.jsx)("p",{className:"text-xl text-gray-600 mb-3",children:a.specialisation}),(0,b.jsxs)("div",{className:"flex gap-4 text-gray-600 text-sm",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(l,{size:16}),a.user.email]}),(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(k,{size:16}),a.user.phone]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-3",children:[(0,b.jsx)("span",{className:`text-xs px-3 py-1 rounded-full font-bold ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.isActive?"Active":"Inactive"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.gender}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:[a._count?.visits??0," total visits"]})]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("button",{onClick:H,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,b.jsx)(m.Edit,{size:16})," Edit Schedule"]})})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(h.Calendar,{className:"text-blue-600",size:24}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Weekly Schedule"})]}),0===j.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,b.jsx)(q.Clock,{className:"mx-auto text-gray-400 mb-3",size:48}),(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"No schedule set"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"This doctor doesn't have any working hours configured yet."}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)("button",{onClick:H,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,b.jsx)(d.Plus,{size:16})," Add Schedule"]})})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[(0,b.jsx)("th",{className:"text-left p-4 font-bold text-gray-700 w-1/5",children:"Day"}),(0,b.jsx)("th",{className:"text-left p-4 font-bold text-gray-700",children:"Start Time"}),(0,b.jsx)("th",{className:"text-left p-4 font-bold text-gray-700",children:"End Time"}),(0,b.jsx)("th",{className:"text-center p-4 font-bold text-gray-700",children:"Status"}),(0,b.jsx)("th",{className:"text-center p-4 font-bold text-gray-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:C.map(a=>{let c=j.filter(b=>b.dayOfWeek===a),e=a.charAt(0)+a.slice(1).toLowerCase();return 0===c.length?(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"p-4 font-semibold text-gray-800",children:e}),(0,b.jsx)("td",{colSpan:2,className:"p-4 text-gray-500 italic",children:"Not Available"}),(0,b.jsx)("td",{className:"p-4 text-center",children:(0,b.jsx)("span",{className:"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full font-medium",children:"Off Day"})}),(0,b.jsx)("td",{className:"p-4 text-center",children:(0,b.jsxs)("button",{onClick:H,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1 mx-auto transition-colors",children:[(0,b.jsx)(d.Plus,{size:14})," Add"]})})]},a):c.map((d,f)=>(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[0===f&&(0,b.jsx)("td",{rowSpan:c.length,className:"p-4 font-semibold text-gray-800 align-top",children:e}),(0,b.jsx)("td",{className:"p-4 text-gray-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Clock,{size:16,className:"text-blue-600"}),d.startTime&&d.startTime.includes("T")?z(d.startTime,y):(()=>{let a=A(d.startTime,y);return z((()=>{let[b,c]=a.split(":").map(Number),d=((60*b+c-330)%1440+1440)%1440,e=Math.floor(d/60);return`1970-01-01T${String(e).padStart(2,"0")}:${String(d%60).padStart(2,"0")}:00.000Z`})(),y)})()]})}),(0,b.jsx)("td",{className:"p-4 text-gray-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Clock,{size:16,className:"text-blue-600"}),d.endTime&&d.endTime.includes("T")?z(d.endTime,y):(()=>{let a=A(d.endTime,y);return z((()=>{let[b,c]=a.split(":").map(Number),d=((60*b+c-330)%1440+1440)%1440,e=Math.floor(d/60);return`1970-01-01T${String(e).padStart(2,"0")}:${String(d%60).padStart(2,"0")}:00.000Z`})(),y)})()]})}),(0,b.jsx)("td",{className:"p-4 text-center",children:(0,b.jsx)("span",{className:"bg-green-100 text-green-700 text-xs px-3 py-1 rounded-full font-medium",children:"Available"})}),(0,b.jsx)("td",{className:"p-4 text-center",children:0===f&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsxs)("button",{onClick:H,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1 transition-colors",children:[(0,b.jsx)(m.Edit,{size:14})," Edit"]}),(0,b.jsx)("button",{disabled:!!E[a],onClick:()=>I(a),className:"text-red-600 hover:text-red-700 font-medium text-sm flex items-center gap-1 disabled:opacity-50 transition-colors",children:E[a]?"Deleting...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Trash2,{size:14})," Delete"]})})]})})]},`${a}-${f}`))})})]})})]}),u&&x&&(0,b.jsx)(B,{doctor:x,onClose:()=>v(!1),onSuccess:J})]})},E=({doctor:a,onClose:d,onSuccess:e})=>{let f=!!a,[h,i]=(0,c.useState)({name:a?.user.name||"",email:a?.user.email||"",phone:a?.user.phone||"",specialisation:a?.specialisation||"",gender:a?.gender||"MALE"}),[j,k]=(0,c.useState)({}),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),p=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c})),j[b]&&k(a=>{let c={...a};return delete c[b],c}),o(null)},q=async b=>{if(b.preventDefault(),(()=>{let a={};return h.name.trim()||(a.name="Name is required"),h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(a.email="Invalid email format"):a.email="Email is required",h.phone.trim()||(a.phone="Phone number is required"),h.specialisation.trim()||(a.specialisation="Specialization is required"),k(a),0===Object.keys(a).length})()){m(!0),o(null);try{f&&a?await g.doctorApi.updateDoctor(a.id,{name:h.name,email:h.email,phone:h.phone,specialisation:h.specialisation,gender:h.gender}):await g.doctorApi.createDoctor(h),e()}catch(a){a instanceof Error?o(a.message):o(`Failed to ${f?"update":"create"} doctor`)}finally{m(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-300 bg-gradient-to-r from-blue-600 to-blue-700 rounded-t-2xl",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white",children:f?"Edit Doctor":"Add New Doctor"}),(0,b.jsx)("button",{onClick:d,className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-2 transition-all",disabled:l,children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:q,className:"p-6 space-y-4 overflow-y-auto",children:[n&&(0,b.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",children:(0,b.jsx)("p",{className:"font-medium",children:n})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"name",value:h.name,onChange:p,placeholder:"e.g., Dr. Anil Sharma",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-700 ${j.name?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.name&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"email",name:"email",value:h.email,onChange:p,placeholder:"doctor@medicare.com",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-900 placeholder-gray-400 ${j.email?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.email&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"phone",value:h.phone,onChange:p,placeholder:"e.g., +977-9851012345",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-900 placeholder-gray-400 ${j.phone?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.phone&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 placeholder-gray-400 mb-2",children:["Specialization ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"specialisation",value:h.specialisation,onChange:p,placeholder:"e.g., Cardiology",className:`w-full px-4 py-3 bg-white border-2 rounded-lg focus:outline-none focus:ring-2 transition-all text-gray-900 placeholder-gray-400 ${j.specialisation?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:l}),j.specialisation&&(0,b.jsx)("p",{className:"text-red-600 text-xs mt-1 font-medium",children:j.specialisation})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 placeholder-gray-400 mb-2",children:["Gender ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"gender",value:h.gender,onChange:p,className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all text-gray-900 placeholder-gray-400",children:[(0,b.jsx)("option",{value:"MALE",children:"Male"}),(0,b.jsx)("option",{value:"FEMALE",children:"Female"}),(0,b.jsx)("option",{value:"OTHER",children:"Other"})]})]})]}),!f&&(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-lg p-4 mt-4 shadow-sm",children:(0,b.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,b.jsx)("strong",{className:"font-semibold",children:"Note:"})," A default password ",(0,b.jsx)("code",{className:"bg-blue-200/50 px-2 py-1 rounded font-mono text-blue-900",children:"Doctor@123"})," will be set for this doctor. They can change it after first login."]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-300",children:[(0,b.jsx)("button",{type:"button",onClick:d,disabled:l,className:"px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-semibold flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{size:20,className:"animate-spin"}),f?"Updating...":"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Save,{size:20}),f?"Update Doctor":"Create Doctor"]})})]})]})]})})};var F=a.i(73570);let G=({doctor:a,onClose:d,onSuccess:e})=>{let[f,h]=(0,c.useState)("soft"),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=async()=>{j(!0),l(null);try{await g.doctorApi.deleteDoctor(a.id,"permanent"===f),e()}catch(a){a instanceof Error?l(a.message):l("Failed to delete doctor")}finally{j(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(F.AlertTriangle,{className:"text-red-600",size:20})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Delete Doctor"})]}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:(0,b.jsx)(s.X,{size:24})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4 overflow-y-auto flex-1",children:[k&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Doctor Details:"}),(0,b.jsx)("p",{className:"font-bold text-gray-800",children:a.user.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.specialisation}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.user.email})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-gray-700 font-medium",children:"Choose delete option:"}),(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("input",{type:"radio",name:"deleteType",value:"soft",checked:"soft"===f,onChange:a=>h(a.target.value),className:"mt-1",disabled:i}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:"Deactivate (Recommended)"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Doctor will be marked as inactive but data will be preserved. Visit history remains intact."})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-red-50 transition-colors",children:[(0,b.jsx)("input",{type:"radio",name:"deleteType",value:"permanent",checked:"permanent"===f,onChange:a=>h(a.target.value),className:"mt-1",disabled:i}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-red-700",children:"Permanent Delete"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Completely remove doctor from system. Only allowed if doctor has no visit records."})]})]})]}),"permanent"===f&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(F.AlertTriangle,{className:"text-red-600 flex-shrink-0 mt-0.5",size:18}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-red-800",children:"Warning!"}),(0,b.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"This action cannot be undone. All doctor data will be permanently deleted."})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 flex-shrink-0",children:[(0,b.jsx)("button",{type:"button",onClick:d,disabled:i,className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsx)("button",{onClick:m,disabled:i,className:`px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"permanent"===f?"bg-red-600 hover:bg-red-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{size:20,className:"animate-spin"}),"permanent"===f?"Deleting...":"Deactivating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Trash2,{size:20}),"permanent"===f?"Delete Permanently":"Deactivate Doctor"]})})]})]})})};var H=a.i(76585),I=a.i(93735);let J=()=>{let[a,h]=(0,c.useState)("list"),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)({currentPage:1,totalPages:1,totalCount:0,limit:9,hasNextPage:!1,hasPrevPage:!1}),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("all"),[C,F]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),L=async()=>{F(!0),K(null);try{let a=await g.doctorApi.getDoctors({page:w.currentPage,limit:w.limit,search:y,isActive:A});v(a.doctors),x(a.pagination)}catch(a){K(a instanceof Error?a.message:"Failed to fetch doctors")}finally{F(!1)}},M=async a=>{F(!0),K(null);try{let b=await g.doctorApi.getDoctorById(a);l(b)}catch(a){K(a instanceof Error?a.message:"Failed to fetch doctor details")}finally{F(!1)}};(0,c.useEffect)(()=>{L()},[w.currentPage,A]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{1===w.currentPage?L():x(a=>({...a,currentPage:1}))},500);return()=>clearTimeout(a)},[y]);let N=a=>{j(a),M(a),h("schedule")},O=a=>{q(a)},P=a=>{t(a)};return"schedule"===a&&k?(0,b.jsx)(D,{doctor:k,onBack:()=>{h("list"),j(null),l(null),L()},isLoading:C,onScheduleUpdate:()=>M(k.id)}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Doctors"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage doctor profiles and schedules"})]}),(0,b.jsxs)("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 shadow-lg font-medium transition-colors",children:[(0,b.jsx)(d.Plus,{size:20})," Add New Doctor"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or specialization...",value:y,onChange:a=>z(a.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-gray-800 placeholder-gray-400"})]}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none text-gray-800",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"true",children:"Active"}),(0,b.jsx)("option",{value:"false",children:"Inactive"})]})]}),J&&(0,b.jsx)(I.default,{message:J,onDismiss:()=>K(null)}),C?(0,b.jsx)(r.default,{}):0===u.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Stethoscope,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"No doctors found"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Try adjusting your search or filters"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(a=>(0,b.jsx)(o,{doctor:a,onViewSchedule:N,onEdit:O,onDelete:P},a.id))}),w.totalPages>1&&(0,b.jsx)(H.default,{currentPage:w.currentPage,totalPages:w.totalPages,totalCount:w.totalCount,onPageChange:a=>{x(b=>({...b,currentPage:a}))},hasNextPage:w.hasNextPage,hasPrevPage:w.hasPrevPage})]})]}),(m||p)&&(0,b.jsx)(E,{doctor:p,onClose:()=>{n(!1),q(null)},onSuccess:()=>{n(!1),q(null),L()}}),s&&(0,b.jsx)(G,{doctor:s,onClose:()=>t(null),onSuccess:()=>{t(null),L()}})]})}}];

//# sourceMappingURL=src_app_%28protected%29_doctors_page_tsx_fa709f7f._.js.map