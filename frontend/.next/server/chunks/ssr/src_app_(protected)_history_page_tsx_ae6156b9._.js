module.exports=[89557,a=>{"use strict";a.s(["default",()=>m],89557);var b=a.i(87924),c=a.i(72131),d=a.i(51100),e=a.i(54602),f=a.i(67209);let g=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var h=function(a){return a.COMPLETED="COMPLETED",a.CANCELLED="CANCELLED",a.WITH_DOCTOR="WITH_DOCTOR",a.CHECKED_IN="CHECKED_IN",a.SCHEDULED="SCHEDULED",a}(h||{});let i={COMPLETED:"px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700",CANCELLED:"px-3 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700",WITH_DOCTOR:"px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-800",CHECKED_IN:"px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-700",SCHEDULED:"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-700"},j={COMPLETED:{bg:"#dcfce7",fg:"#15803d"},CANCELLED:{bg:"#fee2e2",fg:"#b91c1c"},WITH_DOCTOR:{bg:"#fffbeb",fg:"#854d0e"},CHECKED_IN:{bg:"#ebf8ff",fg:"#075985"},SCHEDULED:{bg:"#f3f4f6",fg:"#374151"}},k=({status:a})=>{let c=(a??"").toString().trim().toUpperCase(),d=i[c]??"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-700",e=j[c];return(0,b.jsx)("span",{className:d,style:e?{backgroundColor:e.bg,color:e.fg}:void 0,children:c||"UNKNOWN"})},l=({visits:a,isLoading:d})=>d?(0,b.jsx)("div",{className:"p-12 text-center text-gray-600",children:"Loading history..."}):0===a.length?(0,b.jsx)("div",{className:"p-12 text-center text-gray-500",children:"No visits found for the selected filters."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Date"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Type"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Patient"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Doctor"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Status"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Time"}),(0,b.jsx)("th",{className:"p-4 font-bold text-left text-gray-700",children:"Priority"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsx)(c.default.Fragment,{children:a.logs.map((c,d)=>(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[0===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{rowSpan:a.logs.length,className:"p-4 align-top font-medium text-gray-800",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{rowSpan:a.logs.length,className:"p-4 align-top",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"WALK_IN"===a.visitType?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:a.visitType})}),(0,b.jsx)("td",{rowSpan:a.logs.length,className:"p-4 align-top text-gray-700",children:a.patient.name}),(0,b.jsx)("td",{rowSpan:a.logs.length,className:"p-4 align-top text-gray-700",children:a.doctor.user.name})]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(k,{status:c.status})}),(0,b.jsx)("td",{className:"p-4 text-gray-600 text-sm",children:new Date(c.timestamp).toLocaleString()}),0===d&&(0,b.jsx)("td",{rowSpan:a.logs.length,className:"p-4 align-top",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"URGENT"===a.priority?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:a.priority})})]},`${a.id}-${d}`))},a.id))})]})});function m(){let a=(0,d.useAppDispatch)(),{visits:h,summary:i,status:j}=(0,d.useAppSelector)(a=>a.visitHistory),[k,m]=(0,c.useState)(new Date().toISOString().split("T")[0]);(0,c.useEffect)(()=>{k&&a((0,e.fetchVisitHistory)({date:k}))},[k,a]);let n=async()=>{try{let a=await (0,f.exportVisitHistory)({date:k}),b=window.URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`visit-history-${k}.xlsx`,document.body.appendChild(c),c.click(),c.remove()}catch(a){console.error("Failed to export Excel file:",a)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Visit History"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Detailed audit log of all patient visits"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("label",{htmlFor:"visit-date",className:"font-bold text-gray-700",children:"Select Date:"}),(0,b.jsx)("input",{id:"visit-date",type:"date",value:k,onChange:a=>m(a.target.value),className:"border-2 border-gray-300 rounded-lg px-4 py-2 font-medium text-gray-700"})]}),(0,b.jsxs)("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-medium",children:[(0,b.jsx)(g,{size:16})," Export Excel"]})]}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(l,{visits:h,isLoading:"loading"===j})})]})]})}}];

//# sourceMappingURL=src_app_%28protected%29_history_page_tsx_ae6156b9._.js.map